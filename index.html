<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>è´¦å·ç›‘æ§æ± </title>
    <style>
        /* ğŸ“± åŸºç¡€æ ·å¼ */
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: #f5f6f7;
            margin: 0;
            padding: 15px;
            color: #1f2329;
            -webkit-tap-highlight-color: transparent;
        }

        h2 { text-align: center; font-size: 18px; margin: 10px 0 5px 0; color: #000; }
        .refresh-tip { text-align: center; font-size: 12px; color: #8f959e; margin-bottom: 15px; }

        /* ============================
           ğŸ–¼ï¸ æ–°å¢ï¼šæ•™ç¨‹å›¾ç‰‡åŒºåŸŸæ ·å¼
           ============================ */
        .tutorial-section {
            background: #fff;
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 20px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
            text-align: center;
            border: 1px solid #dee0e3;
        }
        
        .tutorial-title {
            font-weight: bold;
            color: #d0021b; /* çº¢è‰²è­¦ç¤ºè‰² */
            margin-bottom: 10px;
            font-size: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
        }

        /* ç¼©ç•¥å›¾å®¹å™¨ */
        .thumb-grid {
            display: flex;
            gap: 10px;
            justify-content: center;
        }

        .thumb-img {
            width: 48%; /* è®©ä¸¤å¼ å›¾å¹¶æ’ï¼Œæˆ–è€…æ ¹æ®éœ€è¦è°ƒæ•´ */
            height: auto;
            border-radius: 8px;
            border: 1px solid #eee;
            object-fit: cover; /* ä¿æŒæ¯”ä¾‹å¡«å…… */
            cursor: zoom-in; /* é¼ æ ‡æ”¾ä¸Šå»æ˜¾ç¤ºæ”¾å¤§é•œ */
        }

        /* æ•™ç¨‹é•¿å›¾å•ç‹¬æ ·å¼ */
        .guide-full-width {
            width: 100%;
            margin-top: 10px;
            border-radius: 8px;
            cursor: zoom-in;
        }

        /* ============================
           ğŸ” æ–°å¢ï¼šå›¾ç‰‡æ”¾å¤§æŸ¥çœ‹å™¨ (Modal)
           ============================ */
        .image-modal {
            display: none; /* é»˜è®¤éšè— */
            position: fixed;
            z-index: 9999;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.9); /* é»‘è‰²åŠé€æ˜èƒŒæ™¯ */
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.2s;
        }

        .modal-content {
            margin: auto;
            display: block;
            max-width: 95%;
            max-height: 95%;
            border-radius: 5px;
            box-shadow: 0 0 20px rgba(255,255,255,0.2);
        }

        .modal-tip {
            position: absolute;
            bottom: 20px;
            color: #fff;
            font-size: 14px;
            background: rgba(255,255,255,0.2);
            padding: 5px 15px;
            border-radius: 20px;
        }

        @keyframes fadeIn {
            from {opacity: 0} 
            to {opacity: 1}
        }

        /* åŸæœ‰çš„å¡ç‰‡æ ·å¼ */
        .card {
            background: #fff;
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 15px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
            border: 1px solid #dee0e3;
        }
        .card-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; padding-bottom: 12px; border-bottom: 1px dashed #eff0f1; }
        .region-badge { font-weight: 700; font-size: 16px; display: flex; align-items: center; }
        .region-badge::before { content: ''; display: inline-block; width: 4px; height: 16px; background: #3370ff; margin-right: 8px; border-radius: 2px; }
        .status-badge { font-size: 12px; padding: 2px 8px; border-radius: 4px; background: #eafff2; color: #00b656; }
        .row { margin-bottom: 12px; }
        .row:last-child { margin-bottom: 0; }
        .label { font-size: 12px; color: #8f959e; margin-bottom: 4px; }
        .value-box { display: flex; align-items: center; background: #f5f6f7; border-radius: 6px; padding: 10px; border: 1px solid #dee0e3; position: relative; }
        .value-text { flex: 1; font-family: "SF Mono", Consolas, monospace; font-size: 14px; word-break: break-all; margin-right: 10px; }
        .copy-btn { background: #3370ff; color: white; border: none; border-radius: 4px; padding: 6px 12px; font-size: 12px; font-weight: 600; cursor: pointer; white-space: nowrap; }
        .copy-btn:active { opacity: 0.8; transform: scale(0.95); }
        .copy-btn.copied { background: #00b656; }
        .footer { text-align: right; font-size: 11px; color: #bbbfc4; margin-top: 8px; }
    </style>
</head>
<body>

    <h2>âš¡ï¸ å®æ—¶è´¦å·æ± </h2>
    <div class="refresh-tip" id="status-tip">æ­£åœ¨è·å–æœ€æ–°æ•°æ®...</div>

    <div class="tutorial-section">
        <div class="tutorial-title">âš ï¸ ä½¿ç”¨å‰å¿…çœ‹ (ç‚¹å‡»å›¾ç‰‡æ”¾å¤§)</div>
        
        <img src="./warning.png" class="guide-full-width" onclick="openModal(this)" alt="è­¦å‘Š">
        
        <img src="./guide.jpg" class="guide-full-width" onclick="openModal(this)" alt="æ•™ç¨‹">
    </div>
    <div id="app"></div>

    <div id="imageModal" class="image-modal" onclick="closeModal()">
        <img class="modal-content" id="modalImg">
        <div class="modal-tip">ç‚¹å‡»ä»»æ„å¤„å…³é—­</div>
    </div>

    <script>
        // ===========================================
        // ğŸ‘‡ğŸ‘‡ğŸ‘‡ è¯·ç¡®è®¤è¿™é‡Œçš„ç”¨æˆ·åæ˜¯å¦æ­£ç¡® ğŸ‘‡ğŸ‘‡ğŸ‘‡
        const GITHUB_USERNAME = 'ChengHana';  
        const REPO_NAME = 'woko-monitor'; 
        // ===========================================

        // ç›´æ¥è¯»å–æœ¬åœ°æ–‡ä»¶ (å› ä¸ºå·²ç»éƒ¨ç½²åœ¨ Cloudflare Pages)
        const dataUrl = `./data.json?t=${new Date().getTime()}`;

        fetch(dataUrl)
            .then(res => {
                if (!res.ok) throw new Error("è¿æ¥æ•°æ®æºä¸­...");
                return res.json();
            })
            .then(json => {
                const app = document.getElementById('app');
                const tip = document.getElementById('status-tip');
                
                if (!json.data || json.data.length === 0) {
                    app.innerHTML = '<div style="text-align:center;padding:20px;color:#999">æš‚æ— å¯ç”¨æ•°æ®</div>';
                    return;
                }

                const updateTime = json.updated_at ? new Date(json.updated_at).toLocaleString() : 'åˆšåˆš';
                tip.innerHTML = `æœ€åæ›´æ–°: ${updateTime} Â· å…± ${json.data.length} ä¸ªè´¦å·`;

                let html = '';
                json.data.forEach((item) => {
                    html += `
                        <div class="card">
                            <div class="card-header">
                                <div class="region-badge">${item.region || 'æœªçŸ¥åŒºåŸŸ'}</div>
                                <div class="status-badge">â— ${item.status}</div>
                            </div>
                            
                            <div class="row">
                                <div class="label">è´¦å·</div>
                                <div class="value-box">
                                    <div class="value-text">${item.username}</div>
                                    <button class="copy-btn" onclick="copyText(this, '${item.username}')">å¤åˆ¶</button>
                                </div>
                            </div>

                            <div class="row">
                                <div class="label">å¯†ç </div>
                                <div class="value-box">
                                    <div class="value-text">${item.password}</div>
                                    <button class="copy-btn" onclick="copyText(this, '${item.password}')">å¤åˆ¶</button>
                                </div>
                            </div>
                            
                            
                        </div>
                    `;
                });
                app.innerHTML = html;
            })
            .catch(err => {
                // å¦‚æœæœ¬åœ°è¯»å–å¤±è´¥ï¼Œå°è¯•èµ° CDN
                console.log("æœ¬åœ°è¯»å–å¤±è´¥ï¼Œå°è¯• CDN...");
                // è¿™é‡Œä¸åšé¢å¤–å¤„ç†ï¼Œé€šå¸¸ Cloudflare Pages æœ¬åœ°è¯»å–æœ€ç¨³
            });

        function copyText(btn, text) {
            const textarea = document.createElement('textarea');
            textarea.value = text;
            textarea.style.position = 'fixed'; 
            textarea.style.opacity = '0';
            document.body.appendChild(textarea);
            textarea.select();
            
            try {
                document.execCommand('copy');
                const originalText = btn.innerText;
                btn.innerText = 'æˆåŠŸ';
                btn.classList.add('copied');
                setTimeout(() => {
                    btn.innerText = originalText;
                    btn.classList.remove('copied');
                }, 1500);
            } catch (err) {
                alert('å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨é•¿æŒ‰å¤åˆ¶');
            }
            document.body.removeChild(textarea);
        }

        // ğŸ‘‡ğŸ‘‡ğŸ‘‡ æ–°å¢ï¼šå›¾ç‰‡æ”¾å¤§æŸ¥çœ‹é€»è¾‘ ğŸ‘‡ğŸ‘‡ğŸ‘‡
        function openModal(imgElement) {
            var modal = document.getElementById("imageModal");
            var modalImg = document.getElementById("modalImg");
            modal.style.display = "flex"; // ä½¿ç”¨ flex å±…ä¸­
            modalImg.src = imgElement.src;
        }

        function closeModal() {
            var modal = document.getElementById("imageModal");
            modal.style.display = "none";
        }
    </script>
</body>
</html>
