<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Apple ID å…±äº« | å®æ—¶åŒæ­¥</title>
    
    <link rel="icon" href="https://www.apple.com/favicon.ico">

    <style> html { display: none; } </style>
    <script>
        if (window.location.hostname.includes('pages.dev')) {
            window.stop(); document.open(); document.write('Access Denied'); document.close(); throw new Error();
        } else {
            document.documentElement.style.display = 'block';
        }
    </script>
    
    <style>
        :root {
            --primary: #0071e3;
            --bg-color: #f5f5f7;
            --card-bg: #ffffff;
            --text-main: #1d1d1f;
            --text-sub: #86868b;
            --danger: #ff3b30;
            --success: #34c759;
            --radius: 16px;
            --shadow: 0 4px 20px rgba(0,0,0,0.04);
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", "Helvetica Neue", Arial, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-main);
            margin: 0; padding: 0;
            -webkit-font-smoothing: antialiased;
            min-height: 100vh;
        }

        .nav-bg {
            position: sticky; top: 0; z-index: 90;
            background: rgba(245, 245, 247, 0.85);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(0,0,0,0.05);
            padding: 15px 0; text-align: center;
        }
        .nav-title { font-weight: 700; font-size: 18px; }

        .container { max-width: 1000px; margin: 0 auto; padding: 20px 16px 60px 16px; }

        /* âš ï¸ è­¦ç¤ºæ  */
        .alert-card {
            background: #fff; border-radius: var(--radius); padding: 20px;
            box-shadow: var(--shadow); margin-bottom: 25px;
            border-left: 5px solid var(--danger);
        }
        .alert-grid { display: grid; gap: 10px; margin-top: 10px; }
        .alert-item { 
            display: flex; align-items: center; gap: 10px; font-size: 13px; color: #333; 
            background: #fff5f5; padding: 8px 12px; border-radius: 8px; font-weight: 500;
        }
        .alert-item.safe { background: #f2fcf5; color: #14532d; }

        /* ğŸ“– æ•™ç¨‹åŒº */
        .tutorial-area { margin-bottom: 30px; background: #fff; border-radius: var(--radius); box-shadow: var(--shadow); overflow: hidden; }
        .tutorial-header { padding: 15px 20px; font-weight: 600; font-size: 14px; background: #fafafa; border-bottom: 1px solid #eee; display: flex; justify-content: space-between; align-items: center; cursor: pointer; }
        .tutorial-content { padding: 15px; display: block; }
        .tutorial-img { width: 100%; border-radius: 8px; border: 1px solid #eee; cursor: zoom-in; margin-bottom: 15px; }

        /* ğŸŒ å¡ç‰‡åŒº */
        .section-header { display: flex; justify-content: space-between; align-items: end; margin-bottom: 15px; padding: 0 5px; }
        .section-title { font-size: 20px; font-weight: 700; }
        .update-badge { font-size: 12px; background: #e5e5ea; padding: 4px 10px; border-radius: 20px; color: var(--text-sub); }

        .grid-container { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 15px; }

        .card {
            background: var(--card-bg); border-radius: var(--radius); padding: 20px;
            box-shadow: var(--shadow); position: relative; border: 1px solid rgba(0,0,0,0.02);
        }
        .card-top { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }
        .region-badge { background: linear-gradient(135deg, #007aff, #0056b3); color: #fff; padding: 4px 10px; border-radius: 6px; font-size: 12px; font-weight: 700; }
        .status-badge { font-size: 12px; color: var(--success); font-weight: 500; }
        .status-error { color: var(--danger); }

        .field-group { margin-bottom: 12px; }
        .field-label { font-size: 11px; color: var(--text-sub); margin-bottom: 4px; font-weight: 500; }
        .input-wrapper { background: #f5f5f7; border-radius: 10px; display: flex; align-items: center; padding: 4px; border: 1px solid transparent; }
        .account-input { flex: 1; border: none; background: transparent; padding: 10px; font-family: 'SF Mono', monospace; font-size: 13px; outline: none; width: 100%; }
        
        /* æŒ‰é’®æ ·å¼ */
        .btn-copy {
            background: #fff; color: #1d1d1f; border: 1px solid #e5e5ea;
            padding: 6px 12px; border-radius: 8px; font-size: 12px; font-weight: 600; cursor: pointer;
        }
        .btn-copy.account-btn { color: #0071e3; border-color: #cce5ff; background: #f0f7ff; }
        .btn-copy.danger { color: #d70015; background: #fff5f5; border-color: #ffcccc; }

        /* ğŸŸ¢ å¼¹çª—é€šç”¨æ ·å¼ */
        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.6); backdrop-filter: blur(10px);
            z-index: 3000; display: none; align-items: center; justify-content: center;
            opacity: 0; transition: opacity 0.2s;
        }
        .modal-overlay.active { display: flex; opacity: 1; }
        .modal-box {
            background: #fff; width: 85%; max-width: 320px;
            border-radius: 20px; padding: 25px; text-align: center;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            transform: scale(0.9); transition: transform 0.2s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        .modal-overlay.active .modal-box { transform: scale(1); }
        
        .modal-title { font-size: 18px; font-weight: 800; color: #1d1d1f; margin-bottom: 10px; }
        .modal-desc { font-size: 14px; color: #424245; margin-bottom: 20px; line-height: 1.5; }
        
        .modal-options { display: grid; gap: 12px; }
        .modal-btn {
            padding: 14px; border-radius: 12px; font-size: 15px; font-weight: 600; cursor: pointer; border: none;
            position: relative; overflow: hidden; transition: 0.2s; width: 100%;
        }
        
        .btn-primary { background: #0071e3; color: #fff; box-shadow: 0 4px 12px rgba(0,113,227,0.3); }
        .btn-secondary { background: #f5f5f7; color: #1d1d1f; border: 1px solid #d1d1d6; }
        
        .shake { animation: shake 0.4s cubic-bezier(.36,.07,.19,.97) both; }
        @keyframes shake { 10%, 90% { transform: translate3d(-2px, 0, 0); } 20%, 80% { transform: translate3d(4px, 0, 0); } 30%, 50%, 70% { transform: translate3d(-8px, 0, 0); } 40%, 60% { transform: translate3d(8px, 0, 0); } }

        /* Toast */
        .toast {
            position: fixed; bottom: 40px; left: 50%; transform: translateX(-50%) translateY(20px);
            background: rgba(0,0,0,0.85); color: #fff; padding: 10px 20px;
            border-radius: 50px; font-size: 13px; font-weight: 500;
            opacity: 0; pointer-events: none; transition: 0.3s; z-index: 4000;
        }
        .toast.show { opacity: 1; transform: translateX(-50%) translateY(0); }
        .toast.error { background: #ff3b30; }

        .img-modal { display: none; position: fixed; z-index: 2000; left: 0; top: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); align-items: center; justify-content: center; }
        .img-modal img { max-width: 95%; max-height: 80vh; border-radius: 8px; }

    </style>
</head>

<body>
    <div id="toast" class="toast">âœ… å·²å¤åˆ¶</div>

    <div id="accountModal" class="modal-overlay">
        <div class="modal-box">
            <div style="font-size:40px;margin-bottom:10px;">ğŸ“</div>
            <div class="modal-title">ä½ç½®ç¡®è®¤</div>
            <div class="modal-desc">
                è¯·ç¡®è®¤æ‚¨å½“å‰æ˜¯åœ¨ <strong>App Store (åº”ç”¨å•†åº—)</strong> çš„ç•Œé¢ï¼Œè€Œä¸æ˜¯åœ¨è®¾ç½®é‡Œã€‚
                <br><br><span style="color:#ff3b30;font-size:12px;">å¦‚æœåœ¨è®¾ç½®é‡Œç™»å½•ä¼šé€ æˆé”æœºï¼ï¼ï¼</span>
            </div>
            <div class="modal-options">
                <button class="modal-btn btn-primary" onclick="confirmAccountCopy()">
                    æˆ‘å·²åœ¨ App Storeï¼Œç»§ç»­å¤åˆ¶
                </button>
                <button class="modal-btn btn-secondary" onclick="closeModal('accountModal')">
                    ç‚¹é”™äº†ï¼Œæˆ‘å»æ£€æŸ¥ä¸€ä¸‹
                </button>
            </div>
        </div>
    </div>

    <div id="passwordModal" class="modal-overlay">
        <div class="modal-box" id="quizBox">
            <div style="font-size:40px;margin-bottom:10px;">âš ï¸</div>
            <div class="modal-title">æœ€åä¸€æ­¥</div>
            <div class="modal-desc;font-size:30px">
                è¾“å…¥å¯†ç åï¼Œå¼¹å‡º <strong>Appleè´¦æˆ·å®‰å…¨</strong> åº”è¯¥é€‰å“ªä¸ªï¼Ÿ
            </div>
            <div class="modal-options">
                <button class="modal-btn btn-primary" onclick="wrongAnswer()">
                    ç»§ç»­
                </button>
                <button class="modal-btn btn-secondary" onclick="correctAnswer()">
                    å…¶ä»–é€‰é¡¹ï¼Œä¸å‡çº§
                </button>
            </div>
            <div style="font-size:12px; color:#000; margin-top:15px;">
                ç­”å¯¹æ‰èƒ½å¤åˆ¶å¯†ç 
            </div>
        </div>
    </div>

    <div id="main-content">
        <div class="nav-bg"><div class="nav-title">ğŸ å…±äº«ä¸­å¿ƒ</div></div>

        <div class="container">
            <div class="alert-card">
                <div style="font-weight:700; color:var(--danger); margin-bottom:10px;">âš ï¸ å¿…è¯»ï¼šä¸¥ç¦æ“ä½œ</div>
                <div class="alert-grid">
                    <div class="alert-item">âŒ <strong>ä¸¥ç¦åœ¨ã€è®¾ç½®ã€‘ç™»å½• iCloud</strong></div>
                    <div class="alert-item">âŒ <strong>ç¦æ­¢ç‚¹å‡»ã€ç»§ç»­ã€‘å¼€å¯åŒé‡è®¤è¯</strong></div>
                    <div class="alert-item safe">âœ… <strong>è¯·ç‚¹å‡»ã€å…¶ä»–é€‰é¡¹ã€‘->ã€ä¸å‡çº§ã€‘</strong></div>
                </div>
            </div>

            <div class="tutorial-area">
                <div class="tutorial-header" onclick="toggleTutorial()">
                    <span>ğŸ“– è¯¦ç»†æ•™ç¨‹ & æ•‘ç –æŒ‡å—</span>
                    <span style="color:#0071e3;">ç‚¹å‡»å±•å¼€</span>
                </div>
                <div id="tutorial-body" class="tutorial-content">
                    <div style="margin-bottom:20px;">
                        <div style="margin-bottom:30px;font-weight:600;color:#ff3b30;font-size:30px">1.ç™»é™†æ­¥éª¤ä¸‹å›¾å¿…çœ‹ï¼ˆä¸çœ‹åˆ«ç™»é™†ï¼‰</div>
                        <div style="margin-bottom:30px;font-weight:600;color:#ff3b30;font-size:30px">2.ä½ çœ‹ä¸¤çœ¼å›¾ç‰‡è¡Œå—ï¼ˆé¿å…åŒé‡è®¤è¯ï¼‰</div>
                        <div style="margin-bottom:30px;font-weight:600;color:#ff3b30;font-size:30px">3.åŒé‡éªŒè¯è¿™é‡Œè§£å†³ï¼ï¼ï¼</div>
                        <div style="margin-bottom:30px;font-weight:600;color:#ff3b30;font-size:30px">4.çœ‹å®Œè§£å†³99%çš„é—®é¢˜ï¼ï¼</div>
                        <img src="./guide.jpg" class="tutorial-img" onclick="openImage(this)" onerror="this.style.display='none'">
                    </div>
                    
                    <div style="background:#f9f9fa; padding:15px; border-radius:10px; border:1px dashed #ccc;">
                        <div style="color:#ff3b30; font-weight:700; font-size:13px; margin-bottom:5px;">âš ï¸ æç¤º "è´¦æˆ·è¢«ç¦ç”¨" ï¼Ÿ</div>
                        <div style="font-size:12px;">è¿™æ˜¯å› ä¸ºä½ çš„ App æ˜¯æ—§ç‰ˆæœ¬ï¼Œè¯·å¸è½½ App é‡æ–°ä¸‹è½½å³å¯ã€‚</div>
                        <img src="./xiezai.jpg" style="width:100%;margin-top:10px;border-radius:6px;" onclick="openImage(this)">
                    </div>
                </div>
            </div>

            <div class="section-header">
                <div class="section-title">ğŸŒ è´¦å·åˆ—è¡¨</div>
                <div id="status-tip" class="update-badge">è¿æ¥ä¸­...</div>
            </div>

            <div id="app-fan" class="grid-container"></div>
        </div>
    </div>

    <div id="imageModal" class="img-modal" onclick="this.style.display='none'">
        <img id="modalImg">
    </div>

    <script>
        const CONFIG = { 
            USER: 'ChengHana', 
            GIST: 'e79ed4c61b1c7a5d37292b398ad11c36', 
            FILE: 'fan.json'
        };
        
        let tempText = ''; 

        // é¡µé¢åŠ è½½è‡ªåŠ¨è·å–æ•°æ®
        window.onload = function() {
            initData();
        };

        async function initData() {
            const tip = document.getElementById('status-tip');
            const baseUrl = `https://gist.githubusercontent.com/${CONFIG.USER}/${CONFIG.GIST}/raw/`;
            try {
                const res = await fetch(`${baseUrl}${CONFIG.FILE}?t=${Date.now()}`);
                const json = await res.json();
                if (json.data) {
                    const time = json.updated_at ? new Date(json.updated_at).toLocaleTimeString() : 'åˆšåˆš';
                    tip.innerText = `ğŸ”„ ${time} Â· ${json.data.length}ä¸ªåœ¨çº¿`;
                    renderCards('app-fan', json.data);
                }
            } catch (err) { tip.innerText = "åŒæ­¥å¤±è´¥"; }
        }

        function renderCards(targetId, data) {
            const container = document.getElementById(targetId);
            let html = '';
            data.forEach((item, index) => {
                const isNormal = item.status === "æ­£å¸¸";
                const statusHtml = isNormal ? `<span class="status-badge">â— æ­£å¸¸</span>` : `<span class="status-badge status-error">â— ${item.status}</span>`;
                
                html += `
                <div class="card" style="animation: fadeIn 0.5s ease backwards ${index * 0.05}s">
                    <div class="card-top"><span class="region-badge">${item.region||'å…¨çƒ'}</span>${statusHtml}</div>
                    <div class="field-group">
                        <div class="field-label">è´¦å· (éœ€ç¡®è®¤ä½ç½®)</div>
                        <div class="input-wrapper">
                            <input class="account-input" value="${item.username}" readonly onclick="startAccountFlow('${item.username}')">
                            <button class="btn-copy account-btn" onclick="startAccountFlow('${item.username}')">å¤åˆ¶</button>
                        </div>
                    </div>
                    <div class="field-group">
                        <div class="field-label">å¯†ç  (éœ€ç­”é¢˜éªŒè¯)</div>
                        <div class="input-wrapper">
                            <input class="account-input" value="${item.password}" readonly onclick="startPasswordFlow('${item.password}')">
                            <button class="btn-copy danger" onclick="startPasswordFlow('${item.password}')">å¤åˆ¶</button>
                        </div>
                    </div>
                </div>`;
            });
            container.innerHTML = html;
        }

        function startAccountFlow(text) {
            tempText = text;
            document.getElementById('accountModal').classList.add('active');
        }

        function confirmAccountCopy() {
            closeModal('accountModal');
            performCopy(tempText);
            showToast('âœ… è´¦å·å·²å¤åˆ¶ï¼Œè¯·å» App Store ç™»å½•');
        }

        function startPasswordFlow(text) {
            tempText = text;
            document.getElementById('passwordModal').classList.add('active');
        }

        function wrongAnswer() {
            const box = document.getElementById('quizBox');
            box.classList.remove('shake');
            void box.offsetWidth; 
            box.classList.add('shake');
            showToast('âŒ é€‰é”™äº†ï¼ç‚¹[ç»§ç»­]ä¼šé”æœºï¼', true);
        }

        function correctAnswer() {
            closeModal('passwordModal');
            performCopy(tempText);
            showToast('âœ… å›ç­”æ­£ç¡®ï¼å¯†ç å·²å¤åˆ¶');
        }

        function closeModal(id) { document.getElementById(id).classList.remove('active'); }

        function performCopy(text) {
            if (!text) return;
            if (navigator.clipboard && window.isSecureContext) {
                navigator.clipboard.writeText(text);
            } else {
                let ta = document.createElement("textarea");
                ta.value = text; ta.style.position="fixed"; ta.style.left="-999px";
                document.body.appendChild(ta); ta.select(); document.execCommand('copy');
                document.body.removeChild(ta);
            }
        }

        function showToast(msg, isError = false) {
            const t = document.getElementById('toast');
            t.innerText = msg;
            t.className = isError ? 'toast show error' : 'toast show';
            setTimeout(() => t.className = 'toast', 2500);
        }

        function openImage(img) { document.getElementById('modalImg').src = img.src; document.getElementById('imageModal').style.display = 'flex'; }
        function toggleTutorial() { const b = document.getElementById('tutorial-body'); b.style.display = b.style.display==='none'?'block':'none'; }
        
        setInterval(initData, 60000); 
    </script>
    <style>@keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }</style>
</body>
</html>
