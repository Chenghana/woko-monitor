<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Apple ID å…±äº« | å®æ—¶åŒæ­¥</title>
    
    <link rel="icon" href="https://www.apple.com/favicon.ico">

    <style> html { display: none; } </style>
    <script>
        if (window.location.hostname.includes('pages.dev')) {
            window.stop(); document.open(); document.write('Access Denied'); document.close(); throw new Error();
        } else {
            document.documentElement.style.display = 'block';
        }
    </script>
    
    <style>
        :root {
            --primary: #0071e3;
            --primary-hover: #0077ed;
            --bg-color: #f5f5f7;
            --card-bg: #ffffff;
            --text-main: #1d1d1f;
            --text-sub: #86868b;
            --danger: #ff3b30;
            --success: #34c759;
            --radius: 16px;
            --shadow: 0 4px 20px rgba(0,0,0,0.04);
            --shadow-hover: 0 8px 30px rgba(0,0,0,0.08);
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", "Helvetica Neue", Arial, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-main);
            margin: 0;
            padding: 0;
            -webkit-font-smoothing: antialiased;
            min-height: 100vh;
        }

        .nav-bg {
            position: sticky; top: 0; z-index: 90;
            background: rgba(245, 245, 247, 0.8);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(0,0,0,0.05);
            padding: 15px 0;
            text-align: center;
        }
        .nav-title { font-weight: 700; font-size: 18px; display: flex; align-items: center; justify-content: center; gap: 8px; }

        .container { max-width: 1000px; margin: 0 auto; padding: 20px 16px 60px 16px; }

        .alert-card {
            background: #fff;
            border-radius: var(--radius);
            padding: 24px;
            box-shadow: var(--shadow);
            margin-bottom: 30px;
            border-left: 5px solid var(--danger);
        }
        .alert-title { font-size: 18px; font-weight: 700; margin-bottom: 15px; color: var(--danger); display: flex; align-items: center; gap: 8px; }
        .alert-grid { display: grid; gap: 12px; }
        .alert-item { display: flex; align-items: center; gap: 10px; font-size: 14px; color: #333; background: #fff2f2; padding: 10px 14px; border-radius: 8px; }
        .alert-item.safe { background: #f0fdf4; color: #166534; }

        /* ğŸ–¼ï¸ æ•™ç¨‹åŒºåŸŸæ ·å¼ */
        .tutorial-area { margin-bottom: 40px; background: #fff; padding: 20px; border-radius: var(--radius); box-shadow: var(--shadow); }
        .tutorial-img { 
            width: 100%; border-radius: 12px; 
            border: 1px solid #eee; cursor: zoom-in; 
            transition: transform 0.3s ease;
        }
        .tutorial-img:hover { transform: scale(1.01); }

        .section-header {
            display: flex; justify-content: space-between; align-items: end;
            margin-bottom: 20px; padding: 0 5px;
        }
        .section-title { font-size: 24px; font-weight: 700; }
        .update-badge { font-size: 12px; background: #e5e5ea; padding: 4px 10px; border-radius: 20px; color: var(--text-sub); }

        .grid-container {
            display: grid; 
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); 
            gap: 20px;
        }

        .card {
            background: var(--card-bg);
            border-radius: var(--radius);
            padding: 24px;
            box-shadow: var(--shadow);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(0,0,0,0.02);
        }
        .card:hover { transform: translateY(-4px); box-shadow: var(--shadow-hover); }

        .card-top { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        .region-badge { 
            background: linear-gradient(135deg, #007aff, #0056b3); 
            color: #fff; padding: 6px 14px; border-radius: 20px; 
            font-size: 13px; font-weight: 600; box-shadow: 0 2px 8px rgba(0,113,227,0.3);
        }
        .status-badge { display: flex; align-items: center; gap: 6px; font-size: 12px; font-weight: 500; }
        .dot { width: 8px; height: 8px; border-radius: 50%; background: var(--success); }
        .status-error .dot { background: var(--danger); }
        .status-error { color: var(--danger); }

        .field-group { margin-bottom: 16px; }
        .field-label { font-size: 12px; color: var(--text-sub); margin-bottom: 6px; font-weight: 500; margin-left: 4px; }
        .input-wrapper {
            background: #f5f5f7; border-radius: 12px;
            display: flex; align-items: center; padding: 4px;
            border: 1px solid transparent; transition: 0.2s;
        }
        .input-wrapper:focus-within { border-color: var(--primary); background: #fff; }
        
        .account-input {
            flex: 1; border: none; background: transparent;
            padding: 12px; font-family: 'SF Mono', 'Menlo', monospace;
            font-size: 14px; color: #333; outline: none;
            width: 100%;
        }
        
        .btn-copy {
            background: #fff; color: var(--text-main);
            border: 1px solid rgba(0,0,0,0.1);
            padding: 8px 16px; border-radius: 8px;
            font-size: 13px; font-weight: 600; cursor: pointer;
            transition: 0.2s; box-shadow: 0 1px 2px rgba(0,0,0,0.05);
        }
        .btn-copy:active { transform: scale(0.95); background: #f0f0f0; }

        .lock-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(25px); -webkit-backdrop-filter: blur(25px);
            z-index: 999; display: flex; flex-direction: column; 
            align-items: center; justify-content: center;
            animation: fadeIn 0.3s ease;
        }
        .lock-box {
            background: #fff; padding: 40px; border-radius: 24px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.1); text-align: center; width: 90%; max-width: 360px;
        }
        .lock-input {
            width: 100%; padding: 16px; margin: 24px 0;
            border: 1px solid #d2d2d7; border-radius: 14px;
            font-size: 20px; text-align: center; letter-spacing: 4px; outline: none;
            transition: 0.3s;
        }
        .lock-input:focus { border-color: var(--primary); box-shadow: 0 0 0 4px rgba(0,113,227,0.15); }
        .lock-btn {
            width: 100%; padding: 16px; background: var(--primary);
            color: #fff; border: none; border-radius: 14px;
            font-size: 16px; font-weight: 600; cursor: pointer;
            transition: 0.3s;
        }
        .lock-btn:hover { background: var(--primary-hover); }

        .toast {
            position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%) translateY(20px);
            background: rgba(0,0,0,0.8); color: #fff; padding: 12px 24px;
            border-radius: 30px; font-size: 14px; font-weight: 500;
            opacity: 0; pointer-events: none; transition: 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            z-index: 2000; display: flex; align-items: center; gap: 8px;
            backdrop-filter: blur(10px);
        }
        .toast.show { opacity: 1; transform: translateX(-50%) translateY(0); }

        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        
        .modal { display: none; position: fixed; z-index: 2000; left: 0; top: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); backdrop-filter: blur(5px); align-items: center; justify-content: center; opacity: 0; transition: opacity 0.3s; }
        .modal.active { display: flex; opacity: 1; }
        .modal img { max-width: 95%; max-height: 90%; border-radius: 8px; box-shadow: 0 20px 40px rgba(0,0,0,0.5); transform: scale(0.9); transition: transform 0.3s; }
        .modal.active img { transform: scale(1); }

    </style>
</head>

<body>
    <div id="toast" class="toast">âœ… å¤åˆ¶æˆåŠŸ</div>

    <div id="lock-screen" class="lock-overlay">
        <div class="lock-box">
            <div style="font-size:50px;margin-bottom:15px;">ğŸ”’</div>
            <h2 style="margin:0;font-size:22px;">è®¿é—®å—é™</h2>
            <p style="color:#86868b;font-size:14px;margin-top:8px;">è¯·è¾“å…¥å¯†ç è®¿é—®å…±äº«èµ„æº</p>
            <input type="password" id="password-input" class="lock-input" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢">
            <button class="lock-btn" onclick="checkPassword()">è§£é”è¿›å…¥</button>
            <div id="error-msg" style="color:#ff3b30;font-size:13px;margin-top:15px;display:none;font-weight:600;">âš ï¸ å¯†ç é”™è¯¯ï¼Œè¯·é‡è¯•</div>
        </div>
    </div>

    <div id="main-content" style="display:none; animation: fadeIn 0.6s ease;">
        <div class="nav-bg">
            <div class="nav-title">ğŸ Apple ID å…±äº«ä¸­å¿ƒ</div>
        </div>

        <div class="container">
            <div class="alert-card">
                <div class="alert-title">âš ï¸ å¿…è¯»ï¼šé˜²é”æœºæŒ‡å—</div>
                <div class="alert-grid">
                    <div class="alert-item">âŒ <strong>ä¸¥ç¦åœ¨ã€è®¾ç½®ã€‘ç™»å½• iCloud</strong>ï¼ˆææ˜“é”æœºï¼ï¼‰</div>
                    <div class="alert-item">âŒ <strong>ä¸¥ç¦å¼€å¯åŒé‡è®¤è¯</strong> / ç»‘å®šæ‰‹æœºå·</div>
                    <div class="alert-item safe">âœ… <strong>è¯·ä»…åœ¨ã€App Storeã€‘å•†åº—ç™»å½•ä¸‹è½½</strong></div>
                    <div class="alert-item safe">âœ… ç”¨å®Œè¯·åŠæ—¶é€€å‡ºï¼Œæ–¹ä¾¿ä»–äººä½¿ç”¨</div>
                </div>
            </div>

            <div class="tutorial-area">
                <div style="margin-bottom:20px;">
                    <div style="margin-bottom:30px;font-weight:600;color:#ff3b30;font-size:50px">æ±‚æ±‚ä½ ï¼Œç™»é™†æ­¥éª¤ï¼ˆå¿…çœ‹ï¼ï¼‰</div>
                    <img src="./guide.jpg" class="tutorial-img" onclick="openModal(this)" onerror="this.style.display='none'">
                </div>

                <div style="padding-top:20px; border-top:1px dashed #e5e5ea;">
                    <div style="font-weight:700; color:#ff3b30; margin-bottom:6px;font-size:50px ">é‡åˆ° "è´¦æˆ·è¢«ç¦ç”¨" æŠ¥é”™ï¼Ÿ<br>æ›´æ–°è½¯ä»¶è¦è¾“å…¥å¯†ç ï¼Ÿ</div>
                    <div style="font-size:14px; color:#333; margin-bottom:12px; line-height:1.6;">
                        ä¸‹è½½æˆ–æ›´æ–°å‡ºç°è¿™ä¸ªæƒ…å†µï¼Œ<span style="font-weight:bold;background:#fff2f2;color:#d70015;padding:2px 5px;border-radius:4px;">ç›´æ¥å¸è½½ App é‡æ–°ä¸‹è½½</span> å°±æ˜¯æœ€æ–°ç‰ˆ
                    </div>
                    <img src="./xiezai.jpg" class="tutorial-img" onclick="openModal(this)" onerror="this.style.display='none'">
                </div>
            </div>

            <div class="section-header">
                <div class="section-title">ğŸŒ å®æ—¶è´¦å·åº“</div>
                <div id="status-tip" class="update-badge">â³ è¿æ¥æ•°æ®ä¸­...</div>
            </div>

            <div id="app-fan" class="grid-container"></div>

            <div style="text-align:center; margin-top:50px; color:#ccc; font-size:12px;">
                Designed for Efficiency Â· ä¸¥ç¦ç”¨äºå•†ä¸šç”¨é€”
            </div>
        </div>
    </div>

    <div id="imageModal" class="modal" onclick="closeModal()">
        <img id="modalImg">
    </div>

    <script>
        const CONFIG = { 
            USER: 'ChengHana', 
            GIST: 'e79ed4c61b1c7a5d37292b398ad11c36', 
            FILE: 'fan.json', 
            PASS_MAIN: 'ad123', 
            HOURS: 12 
        };
        
        function checkPassword() {
            var input = document.getElementById('password-input').value;
            if (input.trim() === CONFIG.PASS_MAIN) {
                document.getElementById('lock-screen').style.opacity = '0';
                setTimeout(() => {
                    document.getElementById('lock-screen').style.display='none';
                    document.getElementById('main-content').style.display='block';
                }, 300);
                localStorage.setItem('unlock_ts', Date.now());
                initData();
            } else {
                document.getElementById('error-msg').style.display='block';
                const box = document.querySelector('.lock-box');
                box.style.transform = 'translateX(10px)';
                setTimeout(() => box.style.transform = 'translateX(0)', 100);
            }
        }

        window.onload = function() {
            const ts = localStorage.getItem('unlock_ts');
            if (ts && (Date.now() - ts) < CONFIG.HOURS * 3600000) {
                document.getElementById('lock-screen').style.display='none';
                document.getElementById('main-content').style.display='block';
                initData();
            }
        };

        async function initData() {
            const tip = document.getElementById('status-tip');
            const baseUrl = `https://gist.githubusercontent.com/${CONFIG.USER}/${CONFIG.GIST}/raw/`;
            try {
                const response = await fetch(`${baseUrl}${CONFIG.FILE}?t=${Date.now()}`);
                const json = await response.json();

                if (json.data && json.data.length > 0) {
                    const latestTime = json.updated_at ? new Date(json.updated_at).toLocaleTimeString() : 'åˆšåˆš';
                    tip.innerText = `ğŸ”„ æ›´æ–°äº ${latestTime} Â· ${json.data.length}ä¸ªåœ¨çº¿`;
                    tip.style.background = '#e3f2fd'; tip.style.color = '#007aff';
                    renderCards('app-fan', json.data);
                }
            } catch (err) {
                tip.innerText = "âŒ åŒæ­¥å¤±è´¥ï¼Œè¯·åˆ·æ–°";
                tip.style.background = '#ffe5e5'; tip.style.color = '#d70015';
            }
        }

        function renderCards(targetId, data) {
            const container = document.getElementById(targetId);
            let html = '';
            data.forEach((item, index) => {
                const isNormal = item.status === "æ­£å¸¸";
                const statusHtml = isNormal 
                    ? `<span class="status-badge" style="color:var(--success)"><span class="dot"></span>æ­£å¸¸</span>`
                    : `<span class="status-badge status-error"><span class="dot"></span>${item.status}</span>`;
                const delay = index * 0.05; 
                
                html += `
                <div class="card" style="animation: fadeIn 0.5s ease backwards ${delay}s">
                    <div class="card-top">
                        <span class="region-badge">${item.region||'å…¨çƒ'}</span>
                        ${statusHtml}
                    </div>
                    <div class="field-group">
                        <div class="field-label">Apple ID</div>
                        <div class="input-wrapper">
                            <input class="account-input" value="${item.username}" readonly onclick="this.select()">
                            <button class="btn-copy" onclick="copyText('${item.username}')">å¤åˆ¶</button>
                        </div>
                    </div>
                    <div class="field-group">
                        <div class="field-label">å¯†ç  / Password</div>
                        <div class="input-wrapper">
                            <input class="account-input" value="${item.password}" readonly onclick="this.select()">
                            <button class="btn-copy" onclick="copyText('${item.password}')">å¤åˆ¶</button>
                        </div>
                    </div>
                    ${item.checkTime ? `<div style="text-align:right; font-size:11px; color:#ccc; margin-top:10px;">æ•°æ®æ¥æº: ${item.checkTime}</div>` : ''}
                </div>`;
            });
            container.innerHTML = html;
        }

        function copyText(text) {
            if (!text) return;
            if (navigator.clipboard && window.isSecureContext) {
                navigator.clipboard.writeText(text).then(() => showToast());
            } else {
                let textArea = document.createElement("textarea");
                textArea.value = text;
                textArea.style.position = "fixed"; textArea.style.left = "-9999px";
                document.body.appendChild(textArea);
                textArea.focus(); textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                showToast();
            }
        }

        function showToast() {
            const toast = document.getElementById('toast');
            toast.classList.add('show');
            setTimeout(() => toast.classList.remove('show'), 2000);
        }

        function openModal(img) { 
            const modal = document.getElementById('imageModal');
            const modalImg = document.getElementById('modalImg');
            modalImg.src = img.src; 
            modal.classList.add('active');
        }
        function closeModal() { document.getElementById('imageModal').classList.remove('active'); }
        setInterval(initData, 60000); 
    </script>
</body>
</html>
